<html>
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Android Demo</title>
    <link rel="stylesheet" type="text/css" href="css/style.css">
</head>
<body ng-app="myApp" ng-controller="myCtrl">
    <h1>Android Demo</h1>
    <p>{{app_name}}</p>
    <table>
        <tr ng-repeat="day in days">
            <td></td>
        </tr>
    </table>
    <pre>{{events}}</pre>

    <script src="js/jquery-3.0.0.min.js"></script>
    <script src="js/angular.min.js"></script>
    <script src="js/event.js"></script>
<script>
    var app = angular.module('myApp', []);
    app.controller('myCtrl', function($scope, $http) {
        $scope.app_name = "Android Demo";
        //var events = window.MyUsage.GetAllEvent();
        //events = JSON.parse(events);
        //events = JSON.stringify(events, null, 4);
        //$scope.events = events;
        days = {};
        for (var key in events) {
            var time = new Date(parseInt(key));
            var date = time.toDateString() // toDateString() 自带时区
            var second = time.getSeconds() + 60*(time.getMinutes() + 60*time.getHours());
            if (days[date] == null) {
                days[date] = [];
            }
            days[date].push([second, events[key]]);
        }
        $scope.days = Object.entries(days);
    });
</script>
</body>
</html>